<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personregister - HTML UI</title>

    <link rel="stylesheet" href="styles-basic.css">
</head>

<body>
    <h1>Personregister - HTML UI</h1>
    <p>Detta är en interaktiv version av övningarna från index2.html. Här ska du själv skriva JavaScript-koden för att
        implementera alla funktioner.</p>

    <div class="tips" id="tips">
        Komplettera JavaScript-koden nedanför för att få alla knappar att fungera.<br>
        <b>Snabbstart:</b> Avkommentera koden i visaAllaPersoner() för att komma igång direkt!<br>
    </div>

    <div class="controls" id="controls">
        <h3>Steg 1: Grundfunktioner (ENKLA)</h3>
        <button onclick="visaAllaPersoner()">Visa alla personer</button>
        <button onclick="visaFullaNamn()">Visa fullständiga namn</button>
        <button onclick="sökEfternamn()">Sök "Svensson"</button>

        <h3>Steg 2: Filtrering (MEDEL)</h3>
        <button onclick="visaStockholmare()">Visa personer från Stockholm</button>
        <button onclick="visaVipPersoner()">Visa VIP-personer</button>
        <button onclick="visaStatistik()">Visa statistik</button>

        <h3>Steg 3: Avancerad filtrering (SVÅR)</h3>
        <label for="stadFilter">Välj stad:</label>
        <select id="stadFilter">
            <option value="alla">Alla städer</option>
            <option value="Stockholm">Stockholm</option>
            <option value="Göteborg">Göteborg</option>
            <option value="Malmö">Malmö</option>
        </select>
        <button onclick="filtreraEfterValdStad()">Filtrera efter vald stad</button>

        <label for="vipFilter">Välj VIP-status:</label>
        <select id="vipFilter">
            <option value="alla">Alla personer</option>
            <option value="vip">Endast VIP</option>
            <option value="icke-vip">Endast icke-VIP</option>
        </select>
        <button onclick="filtreraEfterValdVip()">Filtrera efter VIP-status</button>

        <button onclick="kombineraFilter()">Kombinera båda filter</button>
    </div>

    <div id="resultat" class="result-section">
        <h3>Resultat</h3>
        <p>Klicka på "Visa alla personer" för att komma igång, och använd sedan knapparna för att testa olika
            funktioner, allt eftersom du skriver koden.
        </p>
    </div>

    <script>
        // Startdata - samma som i index2.html men med VIP-status redan tillagd
        const personer = [
            { fornamn: "Anna", efternamn: "Andersson", stad: "Stockholm", vip: true },  // A = VIP
            { fornamn: "Erik", efternamn: "Eriksson", stad: "Göteborg", vip: true },   // E = VIP
            { fornamn: "Sara", efternamn: "Svensson", stad: "Malmö", vip: false },
            { fornamn: "Lars", efternamn: "Larsson", stad: "Stockholm", vip: false },
            { fornamn: "Emma", efternamn: "Ek", stad: "Göteborg", vip: true },          // E = VIP
            { fornamn: "Nils", efternamn: "Nilsson", stad: "Malmö", vip: false },
            { fornamn: "Lisa", efternamn: "Lindberg", stad: "Stockholm", vip: false },
            { fornamn: "Johan", efternamn: "Johansson", stad: "Göteborg", vip: false },
            { fornamn: "Maria", efternamn: "Månsson", stad: "Malmö", vip: false },
            { fornamn: "Per", efternamn: "Persson", stad: "Stockholm", vip: false }
        ];

        // ========== HJÄLPFUNKTIONER (Data-processing) ==========

        // TODO: Skriv funktionen skapaFullaNamn() - samma som övning 2 från index2 (ENKEL)
        // Tips: använd map() för att skapa förnamn + " " + efternamn
        function skapaFullaNamn(personLista) {
            // Din kod här...
        }

        // TODO: Skriv funktionen hittaSvensson() - samma som övning 3 från index2 (ENKEL)
        // Tips: använd find() för att hitta person.efternamn === "Svensson"
        function hittaSvensson() {
            // Din kod här...
        }

        // TODO: Skriv funktionen filtreraEfterStad() - samma som övning 1 från index2 (MEDEL)
        // Tips: använd filter() och kontrollera person.stad
        // Tips: om stad === "alla", returnera hela personer-arrayen
        function filtreraEfterStad(stad) {
            // Din kod här...
        }

        // TODO: Skriv funktionen filtreraVipStatus() - filtrera personer baserat på VIP-status (MEDEL)
        // Tips: använd filter() och kontrollera person.vip
        // Tips: hantera tre fall: "alla", "vip", "icke-vip"
        function filtreraVipStatus(vipStatus) {
            // Din kod här...
        }

        // TODO: Skriv funktionen räknaPersonerPerStad() - samma som övning 4 från index2 (MEDEL-SVÅR)
        // Tips: använd reduce() eller for...of-loop med ett tomt objekt
        function räknaPersonerPerStad() {
            // Din kod här...
        }

        // GIVEN: Funktion för att visa personer i HTML (använd denna som mall)
        function visaPersoner(personLista, titel = "Personer") {
            const resultat = document.getElementById('resultat');
            let html = `<h3>${titel} (${personLista.length} st)</h3>`;

            personLista.forEach(person => {
                const vipClass = person.vip ? 'vip' : '';
                const vipBadge = person.vip ? '<span class="vip-badge">VIP</span>' : '';
                html += `
                    <div class="person-card ${vipClass}">
                        <div class="person-name">${person.fornamn} ${person.efternamn}${vipBadge}</div>
                        <div class="person-details">${person.stad}</div>
                    </div>
                `;
            });

            resultat.innerHTML = html;
        }

        // ========== UI-FUNKTIONER (Enkla funktioner, en per knapp) ==========

        // TODO: Skriv funktionen visaAllaPersoner() (ENKEL)
        // Tips: använd visaPersoner() med hela personer-arrayen
        // Tips: ge en passande titel som "Alla personer"
        // SNABBSTART: Avkommentera raden nedan för att komma igång snabbt!
        function visaAllaPersoner() {
            // visaPersoner(personer, "Alla personer");
            // Din kod här...
        }

        // TODO: Skriv funktionen visaFullaNamn() (ENKEL)
        // Tips: använd skapaFullaNamn() och visa namnen som en enkel lista
        function visaFullaNamn() {
            // Din kod här...
        }

        // TODO: Skriv funktionen sökEfternamn() (ENKEL)
        // Tips: använd hittaSvensson() och visa personen med visaPersoner()
        function sökEfternamn() {
            // Din kod här...
        }

        // TODO: Skriv funktionen visaStockholmare() (MEDEL)
        // Tips: använd filtreraEfterStad("Stockholm") och visa resultatet
        function visaStockholmare() {
            // Din kod här...
        }

        // TODO: Skriv funktionen visaVipPersoner() (MEDEL)
        // Tips: använd filtreraVipStatus("vip") och visa resultatet
        function visaVipPersoner() {
            // Din kod här...
        }

        // TODO: Skriv funktionen visaStatistik() (MEDEL-SVÅR)
        // Tips: använd räknaPersonerPerStad() och räkna VIP-medlemmar
        function visaStatistik() {
            // Din kod här...
        }

        // TODO: Skriv funktionen filtreraEfterValdStad() (SVÅR)
        // Tips: hämta värdet från stadFilter och använd filtreraEfterStad()
        function filtreraEfterValdStad() {
            // Din kod här...
        }

        // TODO: Skriv funktionen filtreraEfterValdVip() (SVÅR)
        // Tips: hämta värdet från vipFilter och använd filtreraVipStatus()
        function filtreraEfterValdVip() {
            // Din kod här...
        }

        // TODO: Skriv funktionen kombineraFilter() (MYCKET SVÅR)
        // Tips: hämta båda filter-värden och kombinera filtreringarna
        function kombineraFilter() {
            // Din kod här...
        }

        // Starta inte automatiskt med att visa alla personer
        // Användaren måste klicka på "Visa alla personer" för att komma igång
        // visaAllaPersoner();
    </script>
</body>

</html>